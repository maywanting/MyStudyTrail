title: "关于php中的foreach引用"
date: 2016-12-29 22:28:09
tags:
- PHP
- foreach
- quote
categories:
- study
---

> ##先来看段代码

我在查找(from baidu)关于foreach中引用的资料的时候，百分之九十都是讲的以下代码

``` php
$array = ['1', '2', '3'];
foreach($array => &$value) {}
var_dump($value);

foreach($array => $value) {}
var_dump($value);
```

这段代码的输出呢是这个样子的。

> ##缘起

场景呢是这样的，有一个业务需要请求别人的接口六次，每次获取的数据都不一样，而且呢，这个接口返回的数据量还都挺大的。

第一版代码很简单，就是简单的请求六次，然后从线上跑下来的情况看，这个接口失败的概率很高，基本上五次脚本运行就会有一次异常数据，原因就是接口请求失败

所以呢，我就想将所有的请求都搞成一个数组，如果这次请求失败，那么将这次请求塞到数组末尾，然后再请求。

我知道方法并不是只有这一个……比如说如果这一次请求失败，那么再次请求，请求个五次失败直接脚本退出。

但是我自己就是想这么塞在数组末尾干，所以就出现了以下的问题

> ##初始代码

我一开始的代码可以抽象为这样

http://www.laruence.com/2008/11/20/630.html
